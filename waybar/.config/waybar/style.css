/* -----------------------------------------------------------------------------
 * ANIMATIONS
 * -------------------------------------------------------------------------- */

@keyframes blink-warning {
  70% { color: @light; }
  to  { color: @light; background-color: @warning; }
}

@keyframes blink-critical {
  70% { color: @light; }
  to  { color: @light; background-color: @critical; }
}

/* -----------------------------------------------------------------------------
 * COLORS
 * -------------------------------------------------------------------------- */

@define-color bg                #2E3440;
@define-color light             #D8DEE9;

@define-color nord_bg_blue      #434C5E;
@define-color workspacesfocused #4C566A;

@define-color warning           #ebcb8b;
@define-color critical          #BF616A;

@define-color net_connected     #a6e3a1;
@define-color net_linked        #f9e2af;
@define-color net_disconnected  #f38ba8;

@define-color pa_muted_bg       #BF616A;
@define-color pa_source_muted   #D08770;

@define-color cpu_low           #a3be8c;  /* nord14 - green */
@define-color cpu_medium        #ebcb8b;  /* nord13 - yellow */
@define-color cpu_high          #d08770;  /* nord12 - orange */
@define-color cpu_critical      #bf616a;  /* nord11 - red */

/* Static icon colors from Nord palette */
@define-color icon_volume       #88c0d0;  /* nord8 - frost cyan */
@define-color icon_notify       #ebcb8b;  /* nord13 - aurora yellow */
@define-color icon_power        #bf616a;  /* nord11 - aurora red */
@define-color icon_tray         #8fbcbb;  /* nord7 - frost teal */

/* -----------------------------------------------------------------------------
 * GLOBAL RESET
 * -------------------------------------------------------------------------- */

* {
  border: none;
  min-height: 0;
}

/* -----------------------------------------------------------------------------
 * WAYBAR WINDOW
 * -------------------------------------------------------------------------- */

#waybar {
  background: transparent;
  color: @light;
  font-family: "MesloLGM Nerd Font", "Cantarell", "Font Awesome 5 Pro";
  font-size: 1em;
  font-weight: bold;
}

/* -----------------------------------------------------------------------------
 * UNIVERSAL PILL STYLING FOR ALL MODULES
 * This applies consistent margin, padding, and border-radius to every module.
 * Adjust these values to change spacing for all pills at once.
 * -------------------------------------------------------------------------- */

.module {
  margin: 0.1em 0.2em;
  padding: 0 0.5em;
  border-radius: 0.3em;
  background: @nord_bg_blue;
  color: @light;
}

/* -----------------------------------------------------------------------------
 * WORKSPACES
 * -------------------------------------------------------------------------- */

#workspaces {
  background: @bg;
  padding: 0 0.5em;
}

#workspaces button {
  font-weight: bold;
  padding: 0 0.3em;
  margin: 0 0.1em;
  opacity: 0.7;
  background: transparent;
  font-size: 1em;
}

#workspaces button.active,
#workspaces button.focused {
  background: @workspacesfocused;
  color: @light;
  opacity: 1;
}

#workspaces button.urgent {
  background: @critical;
  color: @light;
  opacity: 1;
}

/* -----------------------------------------------------------------------------
 * CUSTOM POWER
 * -------------------------------------------------------------------------- */

#custom-power {
  padding-right: 0.8em;
  background: @icon_power;
  color: @light;
}

/* -----------------------------------------------------------------------------
 * NOTIFICATIONS
 * -------------------------------------------------------------------------- */

#custom-notifications {
  color: @icon_notify;
}

/* -----------------------------------------------------------------------------
 * LANGUAGE
 * -------------------------------------------------------------------------- */

#language {
  min-width: 1.4em;
}

/* -----------------------------------------------------------------------------
 * PULSEAUDIO
 * -------------------------------------------------------------------------- */

#pulseaudio {
  color: @icon_volume;
}

#pulseaudio.muted {
  background: @pa_muted_bg;
  color: @pa_muted_bg;
}

#pulseaudio.source-muted {
  background: @pa_source_muted;
  color: @light;
}

/* -----------------------------------------------------------------------------
 * BATTERY STATES
 * -------------------------------------------------------------------------- */

#battery.warning:not(.charging) {
  background: @warning;
  color: @bg;
}

#battery.critical:not(.charging) {
  background: @critical;
  color: @light;
  animation-name: blink-critical;
  animation-duration: 0.5s;
  animation-timing-function: steps(12);
  animation-iteration-count: infinite;
  animation-direction: alternate;
}

/* -----------------------------------------------------------------------------
 * CPU STATES
 * -------------------------------------------------------------------------- */

#custom-systemdrawer {
  color: @light;
}

#custom-systemdrawer.medium {
  color: @cpu_medium;
}

#custom-systemdrawer.high {
  color: @cpu_high;
}

#custom-systemdrawer.critical {
  color: @cpu_critical;
}

/* -----------------------------------------------------------------------------
 * SYSTEM GROUP (cpu, memory, disk, temperature)
 * The group container acts as a pill; child modules have no extra spacing.
 * -------------------------------------------------------------------------- */

#system {
  background: @bg;
  margin: 0.1em 0.2em;
  padding: 0;
  border-radius: 0.3em;
}

#system .module {
  margin: 0;
  padding: 0 0.5em;
  background: transparent;
}

/* The leader (cpu) gets pill background */
#system #custom-systemdrawer {
  background: @nord_bg_blue;
  font-size: 1.2em;
  padding-right: 0.7em;
}

/* Revealed children share the group background */
#system #memory,
#system #disk,
#system #temperature,
#system #cpu {
  background: @bg;
}

/* -----------------------------------------------------------------------------
 * TRAY GROUP
 * -------------------------------------------------------------------------- */

#tray-group {
  background: @bg;
  margin: 0.1em 0.2em;
  padding: 0;
  border-radius: 0.3em;
}

#tray-group .module {
  margin: 0;
  padding: 0 0.5em;
  background: transparent;
}

#tray-group #custom-tray-icon {
  background: @nord_bg_blue;
  font-size: 1.2em;
  color: @icon_tray;
}

#tray-group #tray {
  background: @bg;
  padding: 0 0.25em;
}

/* -----------------------------------------------------------------------------
 * Date and Time
 * -------------------------------------------------------------------------- */

#clock-group {
  background: @bg;
  margin: 0.1em 0.2em;
  padding: 0em 0.2em;
  border-radius: 0.3em;
}

#clock-group .module {
  margin: 0;
  padding: 0 0.5em;
  background: transparent;
}

#clock-group #clock.time {
  background: @nord_bg_blue;
  font-size: 1em;
  color: @light;
}

#clock-group #clock.date {
  background: @bg;
  padding: 0 0.25em;
}


/* -----------------------------------------------------------------------------
 * SYSTEM DRAWER MODULE STATES (green → yellow → orange → red)
 * -------------------------------------------------------------------------- */

/* CPU states */
#system #cpu { color: @light; }
#system #cpu.warning { color: @cpu_medium; }
#system #cpu.high { color: @cpu_high; }
#system #cpu.critical { color: @cpu_critical; }

/* Memory states */
#system #memory { color: @light; }
#system #memory.warning { color: @cpu_medium; }
#system #memory.high { color: @cpu_high; }
#system #memory.critical { color: @cpu_critical; }

/* Disk states */
#system #disk { color: @light; }
#system #disk.warning { color: @cpu_medium; }
#system #disk.high { color: @cpu_high; }
#system #disk.critical { color: @cpu_critical; }

/* Temperature states */
#system #temperature { color: @light; }
#system #temperature.warning { color: @cpu_high; }
#system #temperature.critical { color: @cpu_critical; }
